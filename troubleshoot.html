<!doctype hmtl>
<html>
<head>
    <link rel="stylesheet" href="builder.css">
    <script src = "js/jquery-3.6.0.min.js"></script>
</head>
<body>
    <h1 class = "title">
        TrackBody
    </h1>
    <h2 class = "title">
        Program Builder
    </h2>
    <div id = "container">
        <form id = "form">
            <div id = "label">
            <p class = "blockformat">Block</p><div class = "blockformat" id = "block">
            1
            </div>
            </div>
            <div id = "unordered" class = "matchthis">
                <div id = "section">
                    <ul id = "addnew">
                        <li class = "border">    
                            <label for="exercise">Exercise</label>
                            <select id="exercise" name="exercise_list"> 
                                <optgroup label="Lower Body">
                                <option value="back_squat">Back Squat</option>
                                <option value="front_squat">Front Squat</option>
                                <option value="deadlift">Deadlift</option>
                                
                                <optgroup label="Upper Body">
                                <option value="overhead_press">Overhead Press</option>
                                <option value="bench_press">Bench Press</option>
                                </optgroup>
                            </select><br>
                        </li>

                        <li class = "border">
                            <label for="sets">Sets</label>
                            <select id="sets" name="exercise_list"> 
                                <optgroup label="">
                                <option value="one">1</option> 
                                <option value="two">2</option>
                                <option value="three">3</option>
                                <option value="four">4</option>
                                <option value="five">5</option>
                                <option value="six">6</option>
                                <option value="seven">7</option>
                                <option value="eight">8</option>
                                <option value="nine">9</option>
                                <option value="ten">10</option>
                                </optgroup>
                            </select><br>
                        </li>
                    
                        <li class = "border">
                            <label for="reps">Reps</label>
                            <select id="reps" name="exercise_list"> 
                                <optgroup label="">
                                <option value="one">1</option>
                                <option value="two">2</option>
                                <option value="three">3</option>
                                <option value="four">4</option>
                                <option value="five">5</option>
                                <option value="six">6</option>
                                <option value="seven">7</option>
                                <option value="eight">8</option>
                                <option value="nine">9</option>
                                <option value="ten">10</option>
                                </optgroup>
                            </select><br>
                        </li>

                        <li class = "border">
                            <label for="intensity">Intensity</label>
                            <input class="format" type="text" id="intensity" name="intensity" maxlength="10" size="15">

                            <select id="exercise" name="exercise_list"> 
                                <optgroup label="">
                                <option value="percent">Percent</option>
                                <option value="pounds">Pounds</option>
                                <option value="kilograms">Kilograms</option>
                                <option value="rpe">RPE</option>
                                <option value="rpe">Velocity</option>
                                </optgroup>
                            </select><br>
                        </li>
                    </ul>
                </div>
            </div>
            <button id = "combo" class="matchthis" type="button" onclick="addinsideblock();">Add Exercise
            </button>
        </form>
    </div>
    
    <button id = "clicker" class="submit-button" type="button" onclick="addmoreblocks();">Add New Block</button>
    <button id="save-button" type="submit">Save</button>
    
</body>
    
<script>

//var template = $('#unordered .section:first').clone();

//.appendTo('#unordered');

const section = document.getElementById('section')

const mainform = document.getElementById('form');

const addexercise = document.getElementById('addnew');

const button = document.getElementById('clicker');

const addstuff = document.getElementById("unordered");

const saveButton = document.getElementById('save-button');

const div = document.getElementById('container');

const label = document.getElementById('label');

function addanotherinsideblock(){
    let addexercise_two = addstuff.cloneNode(true);
    addnew.append(addexercise_two);
}

//var something = document.querySelector('[id$="-integer"]').id;

//make this so it is a function called on button click in stead of event listener.
//let addblock = document.getElementById('clicker');
  //let int = document.getElementById('block');
  //let integer = 1;
  //addblock.addEventListener('click', function(){
    //integer += 1;
    //int.innerHTML = '#id' + integer;
    //**********
    //int.newid = int + integer;

  //})
//const addstuffclone = addstuff.cloneNode(false);

var counter = 1;
function addinsideblock(){ 
  counter += 1;
  let newul = addexercise.cloneNode(true)
  //let newlist = addexercise.children;
  //let newlistItem = newlist[0];
  //let newlistCopy = newlistItem.cloneNode(true);

  //let newlist2 = addexercise.children;
  //let newlistItem2 = newlist[1];
  //let newlistCopy2 = newlistItem2.cloneNode(true);

  //let newlist3 = addexercise.children;
  //let newlistItem3 = newlist[2];
  //let newlistCopy3 = newlistItem3.cloneNode(true);

  //let newlistItem4 = newlist[3];
  //let newlistCopy4 = newlistItem4.cloneNode(true);
  //appendhere.append(newlistCopy, newlistCopy2, newlistCopy3, newlistCopy4);

  //newul.append(newlistCopy, newlistCopy2, newlistCopy3, newlistCopy4);
  //addexercise.append(newul);
  //document.querySelector('[id$="integer"]').id;
    function integerCount(){
      integer += 1;
    }

  let addstuffclone = addstuff.cloneNode(false);
  let cloneButton = button.cloneNode(true);
    cloneButton.className += integer;
    addstuffclone.className += integer;


  let parent = $("button[id^='combo']").parent();
  let target = parent.children("div[id^='unordered']");
  //let target = parent.children("div[.matchthis']");
  //*****USE THIS $("#parent > .child")

  newul.id += counter;
  //$('#unordered').append(newul);
  //$('#unordered' + integer).append(newul);
  if (cloneButton.className = addstuffclone.className){
    //addstuff.append(newul);
    target.append(newul);
  }

  //target.append(newul);
  //addstuff.append(newul);



}
//*******Experiment here*********
//const form = document.getElementsByClassName('form')

//$("#unordered" + integer);
//$("input[id$=integer]");


//for (var i = 0; i < birds.length; i++) {
  //  if (target.className.matches(cloneButton.className)) {

  //}


var integer = 1

function integerCount(){
    integer += 1;
}
function addmoreblocks(){
  let formClone = mainform.cloneNode(false);
  //let p = document.getElementsByClassName("blockformat");
  //let pclone = p.cloneNode(false);
  //integer +=1
  integerCount();

  let labelClone = label.cloneNode(true);

  let addstuffclone = addstuff.cloneNode(false);
    addstuffclone.id += integer;
  let addexerciseclone = addexercise.cloneNode(false);
  let sectionClone = section.cloneNode(true);
  let button = document.getElementById('combo');
  let cloneButton = button.cloneNode(true);
    cloneButton.id += integer;
    cloneButton.className += integer;
    addstuffclone.className += integer;
  addstuffclone.append(sectionClone);
  div.append(formClone);
  formClone.append(integer, labelClone, addstuffclone, cloneButton);

}




//**use this!**div.first().appendTo(addstuff);


function addnewblock() {
  //let forms = div.getElementsByClassName('form');
  //let firstForm = forms[0];
  //let formClone = firstForm.cloneNode(true);
  //**Dont use this one at all**formClone.className = "newblock";
  //let template = $('#unordered.section').clone();
  div.append(template);

  //div.append(formClone);
  div.append(button);
  div.append(saveButton);
}

//const form = document.getElementsByClassName('form')

function addlist() {
    let stuff = form.getElementById('addnew');
    let morestuff = stuff[0];
    let stuffclone = morestuff.cloneNode(true);
    form.append(stuffclone);
}

//give each form a unique id
//attach the appended ul's to the form that contains the button

$("form").css("background-color", "blue");
$( "li" ).first().css( "background-color", "red" );
$( "li" ).last().css( "background-color", "green" );
$("div").first().css("background-color", "pink");
$(section).first().css("background-color", "yellow");

//let parent = $("button[id^='combo']").parent();
//let target = parent.getElementById("div[id^='unordered']")
$("button[id^='combo']").parent().css("background-color", "purple");
//$( "button#$'clicker'" ).parent().css( "background-color", "purple");
</script>

</html>